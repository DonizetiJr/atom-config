"use babel";

describe('Utility functions', function () {
  var utility = require('../lib/utility.js');

  beforeEach(function () {
    waitsForPromise(function () {
      atom.config.set('linter-gcc.execPath', '/usr/bin/g++');
      atom.config.set('linter-gcc.gccDefaultCFlags', '-Wall');
      atom.config.set('linter-gcc.gccDefaultCppFlags', '-Wall -std=c++11');
      atom.config.set('linter-gcc.gccErrorLimit', 15);
      atom.config.set('linter-gcc.gccIncludePaths', ' ');
      atom.config.set('linter-gcc.gccSuppressWarnings', true);
      atom.config.set('linter-gcc.gccLintOnTheFly', false);
      atom.config.set('linter-gcc.gccDebug', false);
      atom.config.set('linter-gcc.gccErrorString', 'error');
      atom.config.set('linter-gcc.gccWarningString', 'warning');
      atom.config.set('linter-gcc.gccNoteString', 'note');
      atom.packages.activatePackage("language-c");
      atom.packages.activatePackage("language-javascript");
      return atom.packages.activatePackage('linter-gcc');
    });
  });

  it('returns an editor for a C++ file', function () {
    waitsForPromise(function () {
      return atom.workspace.open(__dirname + '/files/missing_include.cpp').then(function (editor) {
        expect(utility.getValidEditor(editor)).toBeDefined();
      });
    });
  });

  it('returns an editor for a C file', function () {
    waitsForPromise(function () {
      return atom.workspace.open(__dirname + '/files/missing_include.c').then(function (editor) {
        expect(utility.getValidEditor(editor)).toBeDefined();
      });
    });
  });

  it('returns undefined for a javascript file', function () {
    waitsForPromise(function () {
      return atom.workspace.open(__dirname + '/../lib/utility.js').then(function (editor) {
        expect(utility.getValidEditor(editor)).not.toBeDefined();
      });
    });
  });

  it('returns no subdirectories for an empty directory', function () {
    list = [];
    expect(utility.walkSync(__dirname + "/files/project_test/sub1/subsub1/")).toEqual([]);
  });

  it('returns one subdirectory correctly', function () {
    list = [];
    expect(utility.walkSync(__dirname + "/files/project_test/sub1")).toEqual([__dirname + "/files/project_test/sub1/subsub1"]);
  });

  it('returns multiple subdirectories correctly', function () {
    list = [];
    expect(utility.walkSync(__dirname + "/files/project_test")).toEqual([__dirname + "/files/project_test/sub1", __dirname + "/files/project_test/sub1/subsub1", __dirname + "/files/project_test/sub2", __dirname + "/files/project_test/sub4", __dirname + "/files/project_test/sub4/subsub2"]);
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2p1bmlvci8uYXRvbS9wYWNrYWdlcy9saW50ZXItZ2NjL3NwZWMvdXRpbGl0eS1zcGVjLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFdBQVcsQ0FBQzs7QUFFWixRQUFRLENBQUMsbUJBQW1CLEVBQUUsWUFBTTtBQUNsQyxNQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQTs7QUFFNUMsWUFBVSxDQUFDLFlBQU07QUFDZixtQkFBZSxDQUFDLFlBQU07QUFDcEIsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMscUJBQXFCLEVBQUUsY0FBYyxDQUFDLENBQUE7QUFDdEQsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsNkJBQTZCLEVBQUUsT0FBTyxDQUFDLENBQUE7QUFDdkQsVUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsK0JBQStCLEVBQUUsa0JBQWtCLENBQUMsQ0FBQTtBQUNwRSxVQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsRUFBRSxFQUFFLENBQUMsQ0FBQTtBQUMvQyxVQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsRUFBRSxHQUFHLENBQUMsQ0FBQTtBQUNsRCxVQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxnQ0FBZ0MsRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUN2RCxVQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsRUFBRSxLQUFLLENBQUMsQ0FBQTtBQUNwRCxVQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsRUFBRSxLQUFLLENBQUMsQ0FBQTtBQUM3QyxVQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQywyQkFBMkIsRUFBRSxPQUFPLENBQUMsQ0FBQTtBQUNyRCxVQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyw2QkFBNkIsRUFBRSxTQUFTLENBQUMsQ0FBQTtBQUN6RCxVQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsRUFBRSxNQUFNLENBQUMsQ0FBQTtBQUNuRCxVQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsQ0FBQTtBQUMzQyxVQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO0FBQ3BELGFBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsWUFBWSxDQUFDLENBQUE7S0FDbkQsQ0FBQyxDQUFBO0dBQ0gsQ0FBQyxDQUFBOztBQUVGLElBQUUsQ0FBQyxrQ0FBa0MsRUFBRSxZQUFNO0FBQzNDLG1CQUFlLENBQUMsWUFBTTtBQUNwQixhQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyw0QkFBNEIsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFBLE1BQU0sRUFBSTtBQUNsRixjQUFNLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO09BQ3RELENBQUMsQ0FBQTtLQUNILENBQUMsQ0FBQTtHQUNILENBQUMsQ0FBQTs7QUFFRixJQUFFLENBQUMsZ0NBQWdDLEVBQUUsWUFBTTtBQUN6QyxtQkFBZSxDQUFDLFlBQU07QUFDcEIsYUFBTyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsMEJBQTBCLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQSxNQUFNLEVBQUk7QUFDaEYsY0FBTSxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQztPQUN0RCxDQUFDLENBQUE7S0FDSCxDQUFDLENBQUE7R0FDSCxDQUFDLENBQUE7O0FBRUYsSUFBRSxDQUFDLHlDQUF5QyxFQUFFLFlBQU07QUFDbEQsbUJBQWUsQ0FBQyxZQUFNO0FBQ3BCLGFBQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLG9CQUFvQixDQUFDLENBQUMsSUFBSSxDQUFDLFVBQUEsTUFBTSxFQUFJO0FBQzFFLGNBQU0sQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxDQUFDO09BQzFELENBQUMsQ0FBQTtLQUNILENBQUMsQ0FBQTtHQUNILENBQUMsQ0FBQTs7QUFFRixJQUFFLENBQUMsa0RBQWtELEVBQUUsWUFBTTtBQUMzRCxRQUFJLEdBQUcsRUFBRSxDQUFBO0FBQ1QsVUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsU0FBUyxHQUFHLG1DQUFtQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7R0FDdkYsQ0FBQyxDQUFBOztBQUVGLElBQUUsQ0FBQyxvQ0FBb0MsRUFBRSxZQUFNO0FBQzdDLFFBQUksR0FBRyxFQUFFLENBQUE7QUFDVCxVQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcsMEJBQTBCLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsR0FBRyxrQ0FBa0MsQ0FBQyxDQUFDLENBQUM7R0FDNUgsQ0FBQyxDQUFBOztBQUVGLElBQUUsQ0FBQywyQ0FBMkMsRUFBRSxZQUFNO0FBQ3BELFFBQUksR0FBRyxFQUFFLENBQUE7QUFDVCxVQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEdBQUcscUJBQXFCLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUNsRSxTQUFTLEdBQUcsMEJBQTBCLEVBQ3RDLFNBQVMsR0FBRyxrQ0FBa0MsRUFDOUMsU0FBUyxHQUFHLDBCQUEwQixFQUN0QyxTQUFTLEdBQUcsMEJBQTBCLEVBQ3RDLFNBQVMsR0FBRyxrQ0FBa0MsQ0FDL0MsQ0FBQyxDQUFDO0dBQ0osQ0FBQyxDQUFBO0NBQ0gsQ0FBQyxDQUFBIiwiZmlsZSI6Ii9ob21lL2p1bmlvci8uYXRvbS9wYWNrYWdlcy9saW50ZXItZ2NjL3NwZWMvdXRpbGl0eS1zcGVjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgYmFiZWxcIjtcblxuZGVzY3JpYmUoJ1V0aWxpdHkgZnVuY3Rpb25zJywgKCkgPT4ge1xuICBjb25zdCB1dGlsaXR5ID0gcmVxdWlyZSgnLi4vbGliL3V0aWxpdHkuanMnKVxuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHdhaXRzRm9yUHJvbWlzZSgoKSA9PiB7XG4gICAgICBhdG9tLmNvbmZpZy5zZXQoJ2xpbnRlci1nY2MuZXhlY1BhdGgnLCAnL3Vzci9iaW4vZysrJylcbiAgICAgIGF0b20uY29uZmlnLnNldCgnbGludGVyLWdjYy5nY2NEZWZhdWx0Q0ZsYWdzJywgJy1XYWxsJylcbiAgICAgIGF0b20uY29uZmlnLnNldCgnbGludGVyLWdjYy5nY2NEZWZhdWx0Q3BwRmxhZ3MnLCAnLVdhbGwgLXN0ZD1jKysxMScpXG4gICAgICBhdG9tLmNvbmZpZy5zZXQoJ2xpbnRlci1nY2MuZ2NjRXJyb3JMaW1pdCcsIDE1KVxuICAgICAgYXRvbS5jb25maWcuc2V0KCdsaW50ZXItZ2NjLmdjY0luY2x1ZGVQYXRocycsICcgJylcbiAgICAgIGF0b20uY29uZmlnLnNldCgnbGludGVyLWdjYy5nY2NTdXBwcmVzc1dhcm5pbmdzJywgdHJ1ZSlcbiAgICAgIGF0b20uY29uZmlnLnNldCgnbGludGVyLWdjYy5nY2NMaW50T25UaGVGbHknLCBmYWxzZSlcbiAgICAgIGF0b20uY29uZmlnLnNldCgnbGludGVyLWdjYy5nY2NEZWJ1ZycsIGZhbHNlKVxuICAgICAgYXRvbS5jb25maWcuc2V0KCdsaW50ZXItZ2NjLmdjY0Vycm9yU3RyaW5nJywgJ2Vycm9yJylcbiAgICAgIGF0b20uY29uZmlnLnNldCgnbGludGVyLWdjYy5nY2NXYXJuaW5nU3RyaW5nJywgJ3dhcm5pbmcnKVxuICAgICAgYXRvbS5jb25maWcuc2V0KCdsaW50ZXItZ2NjLmdjY05vdGVTdHJpbmcnLCAnbm90ZScpXG4gICAgICBhdG9tLnBhY2thZ2VzLmFjdGl2YXRlUGFja2FnZShcImxhbmd1YWdlLWNcIilcbiAgICAgIGF0b20ucGFja2FnZXMuYWN0aXZhdGVQYWNrYWdlKFwibGFuZ3VhZ2UtamF2YXNjcmlwdFwiKVxuICAgICAgcmV0dXJuIGF0b20ucGFja2FnZXMuYWN0aXZhdGVQYWNrYWdlKCdsaW50ZXItZ2NjJylcbiAgICB9KVxuICB9KVxuXG4gIGl0KCdyZXR1cm5zIGFuIGVkaXRvciBmb3IgYSBDKysgZmlsZScsICgpID0+IHtcbiAgICB3YWl0c0ZvclByb21pc2UoKCkgPT4ge1xuICAgICAgcmV0dXJuIGF0b20ud29ya3NwYWNlLm9wZW4oX19kaXJuYW1lICsgJy9maWxlcy9taXNzaW5nX2luY2x1ZGUuY3BwJykudGhlbihlZGl0b3IgPT4ge1xuICAgICAgICBleHBlY3QodXRpbGl0eS5nZXRWYWxpZEVkaXRvcihlZGl0b3IpKS50b0JlRGVmaW5lZCgpO1xuICAgICAgfSlcbiAgICB9KVxuICB9KVxuXG4gIGl0KCdyZXR1cm5zIGFuIGVkaXRvciBmb3IgYSBDIGZpbGUnLCAoKSA9PiB7XG4gICAgd2FpdHNGb3JQcm9taXNlKCgpID0+IHtcbiAgICAgIHJldHVybiBhdG9tLndvcmtzcGFjZS5vcGVuKF9fZGlybmFtZSArICcvZmlsZXMvbWlzc2luZ19pbmNsdWRlLmMnKS50aGVuKGVkaXRvciA9PiB7XG4gICAgICAgIGV4cGVjdCh1dGlsaXR5LmdldFZhbGlkRWRpdG9yKGVkaXRvcikpLnRvQmVEZWZpbmVkKCk7XG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG5cbiAgaXQoJ3JldHVybnMgdW5kZWZpbmVkIGZvciBhIGphdmFzY3JpcHQgZmlsZScsICgpID0+IHtcbiAgICB3YWl0c0ZvclByb21pc2UoKCkgPT4ge1xuICAgICAgcmV0dXJuIGF0b20ud29ya3NwYWNlLm9wZW4oX19kaXJuYW1lICsgJy8uLi9saWIvdXRpbGl0eS5qcycpLnRoZW4oZWRpdG9yID0+IHtcbiAgICAgICAgZXhwZWN0KHV0aWxpdHkuZ2V0VmFsaWRFZGl0b3IoZWRpdG9yKSkubm90LnRvQmVEZWZpbmVkKCk7XG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG5cbiAgaXQoJ3JldHVybnMgbm8gc3ViZGlyZWN0b3JpZXMgZm9yIGFuIGVtcHR5IGRpcmVjdG9yeScsICgpID0+IHtcbiAgICBsaXN0ID0gW11cbiAgICBleHBlY3QodXRpbGl0eS53YWxrU3luYyhfX2Rpcm5hbWUgKyBcIi9maWxlcy9wcm9qZWN0X3Rlc3Qvc3ViMS9zdWJzdWIxL1wiKSkudG9FcXVhbChbXSk7XG4gIH0pXG5cbiAgaXQoJ3JldHVybnMgb25lIHN1YmRpcmVjdG9yeSBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgbGlzdCA9IFtdXG4gICAgZXhwZWN0KHV0aWxpdHkud2Fsa1N5bmMoX19kaXJuYW1lICsgXCIvZmlsZXMvcHJvamVjdF90ZXN0L3N1YjFcIikpLnRvRXF1YWwoW19fZGlybmFtZSArIFwiL2ZpbGVzL3Byb2plY3RfdGVzdC9zdWIxL3N1YnN1YjFcIl0pO1xuICB9KVxuXG4gIGl0KCdyZXR1cm5zIG11bHRpcGxlIHN1YmRpcmVjdG9yaWVzIGNvcnJlY3RseScsICgpID0+IHtcbiAgICBsaXN0ID0gW11cbiAgICBleHBlY3QodXRpbGl0eS53YWxrU3luYyhfX2Rpcm5hbWUgKyBcIi9maWxlcy9wcm9qZWN0X3Rlc3RcIikpLnRvRXF1YWwoW1xuICAgICAgX19kaXJuYW1lICsgXCIvZmlsZXMvcHJvamVjdF90ZXN0L3N1YjFcIixcbiAgICAgIF9fZGlybmFtZSArIFwiL2ZpbGVzL3Byb2plY3RfdGVzdC9zdWIxL3N1YnN1YjFcIixcbiAgICAgIF9fZGlybmFtZSArIFwiL2ZpbGVzL3Byb2plY3RfdGVzdC9zdWIyXCIsXG4gICAgICBfX2Rpcm5hbWUgKyBcIi9maWxlcy9wcm9qZWN0X3Rlc3Qvc3ViNFwiLFxuICAgICAgX19kaXJuYW1lICsgXCIvZmlsZXMvcHJvamVjdF90ZXN0L3N1YjQvc3Vic3ViMlwiXG4gICAgXSk7XG4gIH0pXG59KVxuIl19
//# sourceURL=/home/junior/.atom/packages/linter-gcc/spec/utility-spec.js
